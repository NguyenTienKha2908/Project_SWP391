<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Choose Material</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/main.css}">
</head>

<body>
    <div class="wrap">
        <div class="content">
            <h1>Pick Product Shell </h1>
            <p>Seeking the perfect shell for your material, and let us know the size you wish to have for your
                jewelry</p>
            <div class="container" style="width: 80%">
                <form th:action="@{/saveCustomerMaterial}" method="post">
                    <input type="hidden" name="productId" th:value="${productId}" />
                    <div th:each="material : ${materials}" class="material">
                        <input type="radio" th:id="'material-' + ${material.material_Id}" name="materialId"
                            th:value="${material.material_Id}" />
                        <label th:for="'material-' + ${material.material_Id}">
                            <div class="img-container">
                                <img onclick="toggleClass(event)" th:src="@{${material.img_Url}}" alt="Material Image" />
                            </div>
                            
                            <div th:text="${material.material_Name}" class="my-2"></div>
                        </label>

                        <div class="slidecontainer my-2">
                            <input type="range" min="1" max="4" value="1" class="slider"
                                th:name="'materialWeight_' + ${material.material_Id}"
                                th:id="'weightSlider-' + ${material.material_Id}">
                            <p>Weight: <span th:id="'weightValue-' + ${material.material_Id}">1</span> mace</p>
                        </div>
                        <div class="button-group">
                            <input type="hidden" th:id="'material-' + ${material.material_Id}" name="materialId"
                            th:value="${material.material_Id}" />
                            <input type="submit" value="Next" />
                        </div>
                    </div>
                    
                </form>
            </div>
        </div>
    </div>
    <script th:inline="javascript">
        /*<![CDATA[*/
        const materials = /*[[${materials}]]*/[];
        materials.forEach(function (material) {
            var slider = document.getElementById("weightSlider-" + material.material_Id);
            var output = document.getElementById("weightValue-" + material.material_Id);
            output.innerHTML = slider.value;
            slider.oninput = function () {
                output.innerHTML = this.value;
            }
        });

         function toggleClass(event) {
            event.preventDefault(); // Prevent the default action if any

            // Remove 'selected' class from any currently selected image
            const currentlySelected = document.querySelector('.img-container .selected');
            if (currentlySelected) {
                currentlySelected.classList.remove('selected');
            }

            // Add 'selected' class to the clicked image
            var img = event.currentTarget;
            img.classList.add('selected');
        }
        /*]]>*/
    </script>
</body>

</html>